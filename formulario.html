<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    table{
        text-align: center;
        background-color: #f96;
        width: 25%;
        margin: auto;
        border: 2px #f30 dashed;
    }
    td{
        padding: 15px;
    }

</style>
<script>
    function comenzar(){

        edad=document.getElementById("miedad");
        edad.addEventListener("change",cambia_rango,false);
        document.datos_usuario.addEventListener("invalid",validar,true);
        document.getElementById("Enviar").addEventListener("click",enviar,false);
        document.datos_usuario.addEventListener("input",validar_tiempo_real,false);
    }
    function cambia_rango(){
        var salida=document.getElementById("rango");

        var calculo=edad.value-30;

        if(calculo<30){
            calculo=0;
            edad.value=30;
        }

        salida.innerHTML=calculo+" a "+edad.value;
    }

    function validar(e){
        var elemento=e.target;
        elemento.style.background="#ffdddd";
    }

    function enviar(){

        var cuadro_usuario=document.getElementById("usuario");

        var correcto=document.datos_usuario.checkValidity();

        if(correcto==true){

            document.datos_usuario.submit();

        }else if(cuadro_usuario.validity.valueMissing==true || cuadro_usuario.validity.patternMismatch==true){

            alert("Usuario no puede estar vacÃ­o y recuerda que debe tener 3 letras");

        }

    }

    function validar_tiempo_real(e){
        
        var elemento=e.target;

        if(elemento.validity.valid==true){

            elemento.style.background="#ffffff";

        }else{

            elemento.style.background="#ffdddd";
        }

    }

    window.addEventListener("load",comenzar,false);


</script>
<body>
    <section>
        <form name="datos_usuario" method="GET">
            <table><tr><td>
                    Usuario:</td><td><input pattern="[A-Za-z]{3}" id="usuario" maxlength="10" required></td></tr>
                <tr><td>
                    Email:</td><td><input type="email" name="miemail" id="miemail" required></td></tr>
                <tr><td>
                    Edad:</td><td><input type="range" name="miedad" id="miedad" min="0" max="120" value="30" step="30"></td></tr>
                <tr><td>
                    <output id="rango">0 a 30</output></td></tr>
                <tr><td>
                    <input type="submit" id="Enviar" value="Registrar"></td></tr>
            </table>

        </form>
    </section>
    
</body>
</html>